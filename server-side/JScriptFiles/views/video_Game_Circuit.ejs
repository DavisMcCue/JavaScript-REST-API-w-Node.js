<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
    <link rel="stylesheet" href="../CSS/video_Game_Circuit.css">
</head>
<body>
    <!-- Include the navigation bar using EJS syntax -->
    <nav>
        <ul>
            <% if (username === 'Drdavee32') { %>
                <li><a href="/resume">Resume</a></li>
                <li><a href="/uploader">Upload</a></li>
            <% } else { %>
                <li><a href="/resume">Resume</a></li>
            <% } %>
            <li><a href="#about">About Me</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="/video_Game_Circuit">Video Game Circuit</a></li>
        </ul>
        <div class="user-info">
            <div class="username">Welcome, <%= username %></div>
            <form action="/logout" method="post">
                <button type="submit">Log Off</button>
            </form>
        </div>
    </nav>
    <div class="sidebar">
    <h2>Game Review Portal</h2>
    <ul>
        <li><a href="#">Game Update</a></li>
        <li><a href="#"></a></li>
        <li><a href="#">Link 3</a></li>
    </ul>
</div>

<!-- Image Box -->
<div class="originalBox" onclick="openPopup()">+</div>

<div class="popup" id="myPopup">
    <div class="popup-content">
      <p>Add A Game</p>
      <div class="input-field">
        <label for="input1">Game Title:</label>
        <input type="text" id="gameTitle">
      </div>
      <div class="input-field">
        <label for="input2">Review:</label>
        <input type="text" id="gameReview">
      </div>
      <button class="btn-submit" onclick="submitForm()">Submit</button>
      <button class="btn-cancel" onclick="closePopup()">Cancel</button>
    </div>
  </div>

  <div class="result-box" id="resultBox">
    <img src="../images/GhostBusters.png" alt="GhostBusters">
    <div id ="TitlePage">Title</div>
  </div>

  <script>
    function openPopup() {
      var popup = document.getElementById('myPopup');
      popup.style.display = 'block';
    }
  
    function closePopup() {
      var popup = document.getElementById('myPopup');
      popup.style.display = 'none';
    }
    function submitForm() {
      var input1Value = document.getElementById('gameTitle').value;
      var input2Value = document.getElementById('gameReview').value;
  
      // Add your form submission logic here
      //alert('Form submitted with values:\nText Field 1: ' + input1Value + '\nText Field 2: ' + input2Value);
    closePopup();

    // Show result box
    var resultBox = document.getElementById('resultBox');
    resultBox.style.display = 'block';
    
    // Set the new title
    document.getElementById('TitlePage').innerText = input1Value;

    // Move original box over
    var originalBox = document.querySelector('.originalBox');
    
    // Check if originalBox is not null
    if (originalBox) {
      // Get the current left position as an integer
      var currentLeft = parseInt(window.getComputedStyle(originalBox).left, 10) || 0;

      // Add 120 pixels to the current left position
      var newLeft = currentLeft + 275;

      // Apply the new left position to the style
      originalBox.style.left = newLeft + 'px';
      AddBox();
      console.log("Box moved successfully");
    } else {
      console.error("Original box not found");
    }
  }
  let resultBoxCount = 0;
  function AddBox()
  {
  if (resultBoxCount < 5) { // Limit to a maximum of 5 boxes
    resultBoxCount++;

    const resultContainer = document.getElementById('result-container');

    // Create a new result box
    const resultBox = document.createElement('div');
    resultBox.className = 'result-box';
    resultBox.id = 'result-box-' + resultBoxCount;
    resultBox.innerHTML = 'Result Box ' + resultBoxCount;

    // Calculate the left position based on the count
    const leftPosition = (resultBoxCount - 1) * 275; // Adjust this value as needed

    // Apply the left position to the style
    resultBox.style.left = leftPosition + 'px';

    // Append the new result box to the container
    resultContainer.appendChild(resultBox);
  } else {
    alert("You can only add up to 5 result boxes.");
  }
}
</script>
</body>
</html>